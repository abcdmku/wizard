# Error Handling

Use step validation and status markers.

## Validation errors

```ts
const factory = createWizardFactory<{ locale: 'en' | 'fr' }, Error>();
const { defineSteps, step } = factory;

const steps = defineSteps({
  payment: step<{ cardLast4: string }, TypeError>({
    data: { cardLast4: '' },
    next: [],
    validate: ({ data }) => {
      if (data.cardLast4.length !== 4) throw new TypeError('Card last4 is required');
    },
  }),
});
```

## Runtime status markers

```ts
wizard.markError('payment', new TypeError('Gateway timeout'));
wizard.markLoading('payment');
wizard.markIdle('payment');
wizard.markTerminated('payment', new TypeError('Hard failure'));
```

## Reading errors in React

```tsx
const error = useStepError(wizard, 'payment');
const payment = useWizardStep(wizard, 'payment');

error?.message;
payment.error?.message;
```
