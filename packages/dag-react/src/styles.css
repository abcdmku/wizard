:root,
[data-theme="light"] {
  --wiz-bg: #0b0d12;
  --wiz-surface: #11131a;
  --wiz-muted: #1a1f2b;
  --wiz-border: #263047;
  --wiz-text: #d7e0ff;
  --wiz-subtle: #9bb0d3;
  --wiz-accent: #7aa2ff;
  --wiz-accent-2: #b47cff;
  --wiz-success: #38d39f;
  --wiz-warn: #f8bf45;
  --wiz-danger: #ff6b6b;
  --wiz-edge: #98b0ff;
}

[data-theme="light"] {
  --wiz-bg: #f7f8fb;
  --wiz-surface: #ffffff;
  --wiz-muted: #eef1f8;
  --wiz-border: #dbe2f3;
  --wiz-text: #0d1220;
  --wiz-subtle: #425476;
  --wiz-accent: #3b6cff;
  --wiz-accent-2: #7d4dff;
  --wiz-success: #17a772;
  --wiz-warn: #c07a00;
  --wiz-danger: #d14646;
  --wiz-edge: #5e77ff;
}

.wiz-shell { color: var(--wiz-text); background: var(--wiz-bg); font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji", "Noto Color Emoji"; }
.wiz-panel { background: var(--wiz-surface); border: 1px solid var(--wiz-border); border-radius: 12px; }
.wiz-toolbar { background: var(--wiz-surface); border: 1px solid var(--wiz-border); border-radius: 10px; padding: 6px 8px; display: flex; gap: 8px; align-items: center; }
.wiz-btn { background: var(--wiz-muted); border: 1px solid var(--wiz-border); border-radius: 8px; padding: 6px 10px; color: var(--wiz-text); cursor: pointer; }
.wiz-btn:hover { border-color: var(--wiz-accent); }
.wiz-badge { font-size: 12px; padding: 2px 6px; border-radius: 999px; background: var(--wiz-muted); color: var(--wiz-subtle); border: 1px solid var(--wiz-border); }
.wiz-title { font-weight: 600; letter-spacing: 0.1px; }
.wiz-subtle { color: var(--wiz-subtle); }

.rf-node.wiz-node { background: transparent; border: none; box-shadow: none; }
.wiz-node-card { background: var(--wiz-surface); border: 1px solid var(--wiz-border); color: var(--wiz-text); border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.25); width: 200px; padding: 10px 12px; }
.wiz-node-card[data-selected="true"] { outline: 2px solid var(--wiz-accent); }

/* Node highlight with rounded outline */
.rf-node.wiz-node.highlighted .wiz-node-card {
  box-shadow: 0 10px 30px rgba(0,0,0,0.25), 0 0 0 2px var(--wiz-accent);
}
.wiz-node-head { display: flex; align-items: center; gap: 6px; color: var(--wiz-subtle); font-size: 12px; }
.wiz-node-id { font-family: ui-monospace, SFMono-Regular, Menlo, monospace; }
.wiz-chip { padding: 1px 6px; border-radius: 999px; border: 1px solid var(--wiz-border); background: var(--wiz-muted); }
.wiz-chip.muted { opacity: 0.7; }
.wiz-node-title { font-weight: 700; margin-top: 6px; margin-bottom: 6px; letter-spacing: 0.2px; }
.wiz-node-flags { display: flex; flex-wrap: wrap; gap: 6px; }
.wiz-flag { font-size: 11px; padding: 2px 6px; border-radius: 6px; border: 1px solid var(--wiz-border); background: var(--wiz-muted); color: var(--wiz-subtle); }
.wiz-flag.green { border-color: var(--wiz-success); color: var(--wiz-success); }
.wiz-flag.blue { border-color: var(--wiz-accent); color: var(--wiz-accent); }
.wiz-flag.purple { border-color: var(--wiz-accent-2); color: var(--wiz-accent-2); }
.wiz-flag.gold { border-color: var(--wiz-warn); color: var(--wiz-warn); background: rgba(248, 191, 69, 0.1); }

.wiz-edge-label { background: var(--wiz-surface); border: 1px solid var(--wiz-border); color: var(--wiz-subtle); padding: 2px 6px; border-radius: 6px; }
.wiz-minimap { filter: saturate(0.85); }

.wiz-inspector { position: relative; width: 100%; height: 100%; background: var(--wiz-surface); border-left: 1px solid var(--wiz-border); padding: 16px; display: flex; flex-direction: column; gap: 8px; overflow-y: auto; box-shadow: -4px 0 12px rgba(0,0,0,0.08); pointer-events: auto; box-sizing: border-box; }
.wiz-inspector-head { display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px; }
.wiz-inspector-title { font-weight: 800; }
.wiz-inspector-sub { color: var(--wiz-subtle); font-size: 12px; }
.wiz-inspector-desc { margin: 0 0 12px 0; color: var(--wiz-subtle); font-size: 14px; line-height: 1.5; }
.wiz-inspector-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
.wiz-inspector-label { font-size: 12px; color: var(--wiz-subtle); margin-bottom: 4px; }
.wiz-inspector-kv { display: flex; justify-content: space-between; padding: 6px 0; border-bottom: 1px dashed var(--wiz-border); font-size: 13px; }
.wiz-inspector-kv:last-child { border-bottom: none; }
.wiz-inspector-section { margin-top: 12px; padding-top: 12px; border-top: 1px solid var(--wiz-border); }
.wiz-inspector-section:first-of-type { margin-top: 0; padding-top: 0; border-top: none; }
.wiz-badges { display: flex; gap: 6px; flex-wrap: wrap; }
.wiz-section-title { font-weight: 700; font-size: 13px; margin-bottom: 10px; color: var(--wiz-text); letter-spacing: 0.2px; }
.wiz-stat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
.wiz-stat-item { background: var(--wiz-muted); border: 1px solid var(--wiz-border); border-radius: 8px; padding: 8px 10px; }
.wiz-stat-item.full-width { grid-column: 1 / -1; }
.wiz-stat-label { display: block; font-size: 11px; color: var(--wiz-subtle); margin-bottom: 4px; }
.wiz-stat-value { display: block; font-size: 16px; font-weight: 700; color: var(--wiz-text); }
.wiz-guard-list { display: flex; flex-direction: column; gap: 6px; }
.wiz-guard-item { display: flex; align-items: center; gap: 8px; font-size: 13px; padding: 4px 0; }
.wiz-guard-icon { font-weight: 700; font-size: 14px; width: 20px; text-align: center; }
.wiz-guard-icon.green { color: var(--wiz-success); }
.wiz-guard-icon.blue { color: var(--wiz-accent); }
.wiz-guard-icon.purple { color: var(--wiz-accent-2); }
.wiz-guard-icon.gold { color: var(--wiz-warn); }
.wiz-badge.green { border-color: var(--wiz-success); background: rgba(56, 211, 159, 0.15); color: var(--wiz-success); font-weight: 600; }
.wiz-badge.warn { border-color: var(--wiz-warn); background: rgba(248, 191, 69, 0.15); color: var(--wiz-warn); }
.wiz-badge.tag { border-color: var(--wiz-accent-2); background: rgba(180, 124, 255, 0.15); color: var(--wiz-accent-2); }
.wiz-badge.clickable { cursor: pointer; user-select: none; }
.wiz-badge.clickable:hover { opacity: 0.8; transform: translateY(-1px); }
.wiz-badge.blue { border-color: var(--wiz-accent); background: rgba(122, 162, 255, 0.15); color: var(--wiz-accent); font-weight: 600; }
.wiz-badge.purple { border-color: var(--wiz-accent-2); background: rgba(180, 124, 255, 0.15); color: var(--wiz-accent-2); font-weight: 600; }
.wiz-badge.gold { border-color: var(--wiz-warn); background: rgba(248, 191, 69, 0.15); color: var(--wiz-warn); font-weight: 600; }
.wiz-badge.golden { border-color: var(--wiz-warn); background: rgba(248, 191, 69, 0.15); color: var(--wiz-warn); font-weight: 600; }
.wiz-badge.muted { opacity: 0.6; }
.wiz-code-block { margin-top: 8px; margin-bottom: 8px; width: 100%; background: var(--wiz-muted); border: 1px solid var(--wiz-border); border-radius: 8px; padding: 8px; overflow-x: auto; }
.wiz-code-block pre { margin: 0; white-space: pre-wrap; word-wrap: break-word; }
.wiz-code-block code { font-family: ui-monospace, SFMono-Regular, Menlo, monospace; font-size: 11px; line-height: 1.5; color: var(--wiz-text); }
.wiz-attr-list { display: flex; flex-direction: column; gap: 4px; }
.wiz-attr-item { display: flex; align-items: center; justify-content: space-between; padding: 6px 10px; border-radius: 6px; transition: background 0.15s; }
.wiz-attr-item.active { background: var(--wiz-muted); }
.wiz-attr-item.inactive { opacity: 0.4; }
.wiz-attr-item.clickable { cursor: pointer; }
.wiz-attr-item.clickable:hover { background: var(--wiz-border); }
.wiz-attr-label { display: flex; align-items: center; gap: 8px; flex: 1; }
.wiz-attr-indicator { font-size: 10px; }
.wiz-attr-indicator.green { color: var(--wiz-success); }
.wiz-attr-indicator.blue { color: var(--wiz-accent); }
.wiz-attr-indicator.purple { color: var(--wiz-accent-2); }
.wiz-attr-indicator.gold { color: var(--wiz-warn); }
.wiz-attr-indicator.golden { color: var(--wiz-warn); }
.wiz-attr-indicator.tag { color: var(--wiz-accent-2); }
.wiz-attr-name { font-size: 13px; font-weight: 500; }
.wiz-attr-expand { font-size: 10px; color: var(--wiz-subtle); margin-left: 8px; }
.wiz-resize-handle { position: absolute; top: 0; bottom: 0; width: 8px; cursor: ew-resize; z-index: 11; background: transparent; transition: background 0.15s; margin-left: -4px; }
.wiz-resize-handle:hover { background: var(--wiz-accent); opacity: 0.3; }
.wiz-resize-handle:active { background: var(--wiz-accent); opacity: 0.5; }

/* Handle (connection point) styling */
.react-flow__handle {
  background: var(--wiz-border);
  border: 1px solid var(--wiz-border);
  opacity: 0.1;
}
.react-flow__handle:hover {
  background: var(--wiz-edge);
  border-color: var(--wiz-edge);
  opacity: 1;
}

/* Larger hitbox for handles */
.react-flow__handle {
  width: 5px !important;
  height: 5px !important;
}

/* Any-transition edges - low opacity by default */
.wiz-any-edge {
  opacity: 0.05;
}

/* Highlighted any-transition edges */
.wiz-any-edge.highlighted {
  opacity: 0.6;
}
